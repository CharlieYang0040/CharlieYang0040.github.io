## 6강: SSS & Lookdev 실습 (캐릭터, 헤어)

### 수업 목표

- *SSS(Subsurface Scattering)**의 기본 이론을 이해하고, 빛이 반투명한 재질을 통과하며 만들어내는 효과를 파악합니다.
- **PxrSurface** 셰이der를 사용하여 사실적인 피부(Skin) 재질을 표현하는 방법을 실습합니다.
- **PxrMarschnerHair** 셰이더의 작동 원리를 이해하고, 캐릭터의 머리카락을 사실적으로 렌더링하는 방법을 배웁니다.
- 캐릭터의 피부와 헤어를 종합적으로 개발(Lookdev)하는 워크플로우를 익힙니다.

---

### **1. SSS: 빛이 표면 아래에서 흩어지는 현상**

- *SSS(Subsurface Scattering, 표면하 산란)**는 빛이 물체의 표면을 그대로 반사하지 않고, 내부로 침투한 뒤 여러 번 굴절하고 산란하다가 다시 표면으로 빠져나오는 현상을 말합니다.

> 손전등 비유: 🔦 어두운 곳에서 자신의 손바닥에 손전등을 비춰보면, 손이 붉고 부드럽게 빛나는 것을 볼 수 있습니다. 이것이 바로 SSS입니다. 빛이 피부 속으로 들어가 혈관과 조직에 부딪히며 붉은색을 띠고 부드럽게 퍼져 나오기 때문입니다.
> 

이 SSS 효과는 피부, 과일(포도, 오렌지), 우유, 왁스(양초) 등 반투명한 재질을 사실적으로 보이게 하는 핵심적인 요소입니다. SSS가 없으면 피부는 딱딱한 플라스틱이나 돌처럼 보이게 됩니다.

---

### **2. PxrSurface로 피부 재질 표현하기**

PxrSurface 셰이더는 매우 정교하고 사용하기 쉬운 SSS 기능을 내장하고 있습니다. SSS를 활성화하려면 **Subsurface** 탭으로 이동하여 `Gain` 값을 0보다 크게 설정합니다.

### **핵심 파라미터 이해**

- **`Gain`**: SSS 효과의 전반적인 강도를 조절합니다. 0이면 효과가 없고, 1에 가까울수록 효과가 강해집니다.
- **`Diffuse Color`**: 피부의 표면 색상, 즉 가장 겉 표피층의 색상입니다. 보통 옅은 피부 톤의 텍스처를 연결합니다.
- **`Subsurface Color`**: 빛이 피부 속으로 들어갔을 때 어떤 색을 띠게 될지를 결정합니다. 피부의 경우, 혈관과 근육의 영향으로 채도 높은 붉은색이나 주황색을 사용합니다.
- **`DMFP (Distance Mean Free Path)`**: 빛이 표면 아래에서 평균적으로 얼마나 깊이(거리) 이동할 수 있는지를 결정합니다.
    - **값이 작을수록** 빛이 조금만 들어가도 바로 흡수되거나 산란되어, 밀도가 높은 재질(예: 대리석)처럼 보입니다.
    - **값이 클수록** 빛이 깊고 넓게 퍼져나가, 투명도가 높은 재질(예: 우유, 젤리)처럼 보입니다.
    - **전문가의 팁:** 씬의 스케일에 따라 매우 민감하게 반응하므로, 보통 낮은 값(0.1 ~ 5)에서 시작하여 조금씩 조절하며 테스트하는 것이 중요합니다. `DMFP Color`를 사용하면 RGB 채널별로 빛이 퍼지는 거리를 다르게 제어하여 더욱 정교한 피부 표현도 가능합니다.

**피부 Lookdev 워크플로우:**

1. **Specular 설정:** 먼저 피부의 유분기를 표현하는 Specular Lobe(정반사)를 설정합니다. 피부는 유분기가 있으므로 약간의 반사를 가집니다. Roughness 맵을 사용하여 이마나 코처럼 유분기가 많은 곳과 뺨처럼 건조한 곳의 반사도를 다르게 표현하면 사실감이 살아납니다.
2. **SSS 활성화:** Subsurface의 `Gain`을 1로 설정하고, `Diffuse Color`에 피부 톤 텍스처, `Subsurface Color`에 붉은 계열 색상을 지정합니다.
3. **DMFP 조절:** `DMFP` 값을 조절하며 빛이 퍼지는 느낌을 맞춥니다. 특히 귀, 코, 손가락 끝처럼 얇은 부분에서 SSS 효과가 잘 드러나는지 확인하며 값을 찾습니다.

---

### **3. PxrMarschnerHair: 머리카락에 생명 불어넣기**

머리카락은 수만, 수십만 가닥이 빛과 매우 복잡하게 상호작용하기 때문에 일반 PxrSurface 셰이더로는 표현하기 어렵습니다. RenderMan은 **PxrMarschnerHair**라는 헤어 전용 셰이더를 제공하며, 이는 업계 표준인 '마쉬너(Marschner)' 물리 모델을 기반으로 합니다.

이 셰이더는 빛이 머리카락과 상호작용하는 세 가지 주요 경로를 시뮬레이션합니다.

- **R (Primary Reflection):** 빛이 머리카락 표면에서 바로 반사되는 것. 머리카락의 주된 하이라이트(엔젤링)를 만듭니다.
- **TT (Transmission):** 빛이 머리카락을 투과하는 것. 머리카락을 부드럽고 가벼워 보이게 합니다.
- **TRT (Secondary Reflection):** 빛이 머리카락 내부로 들어갔다가, 내부에서 반사되어 다시 빠져나오는 것. 머리카락의 깊이감 있는 색상을 결정합니다.

### **핵심 파라미터 이해**

- **`Diffuse`**: 거의 사용하지 않습니다. 0으로 두는 것이 좋습니다. 머리카락은 diffuse 성질이 거의 없습니다.
- **`Primary Reflection (R)`**:
    - `Color`: 주 하이라이트의 색상을 결정합니다. 보통 흰색에 가깝게 둡니다.
    - `Roughness`: 하이라이트의 선명도를 조절합니다. 값이 낮을수록 날카로운 엔젤링이 생기고, 높을수록 부드럽게 퍼집니다.
- **`Transmission (TT)`**:
    - `Color`: 빛이 투과될 때의 색상입니다. `Secondary Reflection`과 함께 머리카락의 전반적인 색상을 결정합니다.
    - `Roughness`: 투과되는 빛의 퍼짐을 제어합니다.
- **`Secondary Reflection (TRT)`**:
    - `Color`: 머리카락의 주된 색상을 결정하는 가장 중요한 파라미터입니다. 여기에 원하는 머리카락 색상을 지정합니다.
- **`Melanin`**: 물리 기반의 접근법으로, 이 값을 조절하여 멜라닌 색소의 양을 시뮬레이션함으로써 금발부터 흑발까지 자연스러운 색 변화를 만들 수도 있습니다.

---

### **오늘의 실습 과제**

1. **캐릭터 얼굴 Lookdev:**
    - 캐릭터 얼굴 모델을 준비합니다. (온라인에서 무료 모델을 구하거나, 가지고 있는 모델을 사용하세요.)
    - 3강에서 배운 **3점 조명**과 **DomeLight**를 사용하여 캐릭터를 비춥니다. 특히 **Rim Light**를 강하게 설정하면 SSS 효과를 확인하기 좋습니다.
    - **PxrSurface** 셰이더를 적용하고, 위에서 배운 워크플로우에 따라 Specular와 SSS를 설정하여 사실적인 피부를 만들어 보세요.
    - `DMFP` 값을 극단적으로 높거나 낮게 설정하며 그 차이를 비교해 보세요.
2. **헤어 Lookdev:**
    - 캐릭터의 헤어(Hair curve 또는 geometry)에 **PxrMarschnerHair** 셰이더를 적용합니다.
    - `Secondary Reflection (TRT) Color`를 변경하며 다양한 머리카락 색상을 만들어 보세요.
    - `Primary Reflection (R) Roughness` 값을 조절하며 하이라이트가 날카로워지는 '찰랑이는 머릿결'과 부드러워지는 '푸석한 머릿결'의 차이를 표현해 보세요.
3. **(도전 과제) 통합 Lookdev:** 얼굴과 헤어의 셰이더가 잘 어우러지도록 전체적인 톤과 느낌을 조절하여 하나의 완성된 캐릭터 Lookdev를 마무리합니다.