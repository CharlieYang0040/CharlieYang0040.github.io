## 3강: HDRI 및 RenderMan 조명 실습

### 수업 목표

- **HDRI**의 개념을 이해하고 **PxrDomeLight**를 활용하여 사실적인 환경광을 구축합니다.
- HDRI를 **하늘(Sky)**과 **태양(Sun)**으로 분리하여 각각을 정밀하게 제어하는 전문적인 라이팅 기법을 익힙니다.
- *3점 조명(Key, Fill, Rim)**의 원리를 이해하고, **PxrRectLight**, **PxrDiskLight** 등 RenderMan의 주요 조명을 사용해 캐릭터나 사물의 형태와 질감을 극대화합니다.
- RenderMan의 강력한 기능인 **Light Filter**를 사용하여 빛의 형태와 효과를 창의적으로 제어하는 방법을 실습합니다.

---

### **1. 현실을 담는 그릇: HDRI와 PxrDomeLight**

- *HDRI (High Dynamic Range Image)**는 일반 이미지(JPG, PNG)가 담지 못하는 폭넓은 밝기 정보(광량)를 포함하고 있는 특수한 이미지 포맷(.hdr, .exr)입니다. 장면 전체를 감싸는 거대한 구(Sphere)에 이 HDRI를 씌워 조명으로 사용하는 것이 바로 **이미지 기반 라이팅(Image-Based Lighting, IBL)**이며, RenderMan에서는 **PxrDomeLight**를 사용해 구현합니다.

PxrDomeLight는 HDRI의 각 픽셀이 가진 색상과 밝기 정보를 분석하여, 마치 그 장소에 실제로 있는 것처럼 사방에서 자연스러운 빛과 반사를 만들어냅니다. 야외 장면, 실내 장면 등 원하는 환경을 매우 사실적으로 연출하는 가장 기본적이고 강력한 조명입니다.

**사용법:**

1. RenderMan 셸프에서 PxrDomeLight 아이콘을 클릭하여 생성합니다.
2. Attribute Editor에서 `Color Map` 파라미터에 준비된 HDRI 파일을 연결합니다.
3. `Intensity`로 전체 밝기를, `Exposure`로 밝기를 스톱(Stop) 단위로 정밀하게 조절합니다.

---

### **2. 전문가의 HDRI 활용법: 하늘과 태양 분리하기**

하나의 PxrDomeLight를 사용하는 것은 매우 편리하지만, "하늘의 밝기는 좋은데, 태양 그림자가 너무 약하다" 또는 "그림자 방향을 바꾸고 싶다"와 같은 세밀한 연출에는 한계가 있습니다. 이때 프로 아티스트들은 두 개의 DomeLight를 사용하여 **하늘(분위기)**과 **태양(주요 광원)**을 분리하여 제어합니다.

**실습 단계:**

1. **첫 번째 DomeLight (Sky/Ambient):**
    - 기본 PxrDomeLight를 생성하고 `Color Map`에 원본 HDRI를 연결합니다.
    - 이 라이트는 장면의 전반적인 분위기, 색감, 부드러운 반사를 책임집니다.
    - **중요:** `Specular`와 `Diffuse` 기여도를 조절하여 역할을 명확히 할 수 있지만, 우선은 그대로 두고 태양광을 추가하며 변화를 봅니다.
2. **두 번째 DomeLight (Sun):**
    - 새로운 PxrDomeLight를 하나 더 생성합니다.
    - Photoshop 같은 툴을 이용해 원본 HDRI에서 태양 부분만 남기고 나머지를 검은색으로 만든 'Sun-only HDRI'를 `Color Map`에 연결합니다.
    - 이제 이 라이트는 오직 태양의 역할, 즉 강한 하이라이트와 선명한 그림자만 만듭니다. `Intensity`와 `Exposure`를 조절하여 그림자의 선명도를 제어합니다.
    - DomeLight의 **회전(Rotate Y)** 값을 조절하여 그림자의 방향을 자유롭게 바꿀 수 있습니다. 이것이 이 기법의 가장 큰 장점입니다.

이 기법을 사용하면 하늘의 전체적인 톤은 유지하면서 태양의 강도, 색상, 위치를 독립적으로 완벽하게 제어할 수 있어 훨씬 더 예술적이고 의도적인 라이팅이 가능해집니다.

> 비교: PxrEnvDayLight
> 
> 
> RenderMan은 물리적으로 정확한 하늘과 태양을 시뮬레이션하는 PxrEnvDayLight도 제공합니다. 위도, 경도, 시간, 날짜를 입력하면 해당 조건의 하늘을 자동으로 생성해 주어 매우 편리합니다. 하지만 HDRI를 사용하는 기법에 비해 아티스트가 원하는 특정 분위기나 구름의 형태 등을 연출하기는 어렵습니다. 두 가지 방식의 장단점을 이해하고 상황에 맞게 선택하는 것이 중요합니다.
> 

---

### **3. 3점 조명: 빛으로 형태를 조각하다**

3점 조명은 캐릭터나 제품 등 특정 피사체를 돋보이게 만드는 가장 기본적이고 핵심적인 조명 설계 기법입니다.

- **Key Light (주 조명):**
    - 장면에서 가장 강하고 주된 광원입니다. 피사체의 형태와 질감을 가장 잘 보여주는 방향(보통 45도 위, 45도 옆)에 위치시킵니다.
    - **RenderMan Light:** **PxrRectLight** (사각형 조명) 또는 **PxrDiskLight** (원형 조명)를 주로 사용합니다. `Intensity`와 `Exposure`를 조절하여 밝기를 정하고, 조명의 `크기(Size)`를 조절하여 그림자의 부드러움을 결정합니다. **(크기가 클수록 그림자는 부드러워집니다.)**
- **Fill Light (보조 조명):**
    - Key Light가 만든 강한 그림자를 부드럽게 채워주는 역할을 합니다. Key Light의 반대편에 위치시키며, Key Light보다 훨씬 약한 밝기로 설정하여 장면의 대비(Contrast)를 조절합니다.
    - **RenderMan Light:** Key Light와 마찬가지로 PxrRectLight를 사용하되, 훨씬 더 약한 `Intensity` 값을 사용합니다.
- **Rim Light (Back Light, 윤곽 조명):**
    - 피사체의 뒤쪽에서 비춰 배경과 피사체를 분리시키고 실루엣(윤곽)을 강조하는 역할을 합니다. 입체감과 깊이감을 만드는 데 매우 중요합니다.
    - **RenderMan Light:** PxrRectLight나 PxrDiskLight를 사용하며, 피사체의 형태에 따라 위치와 각도를 정밀하게 조절합니다.

---

### **4. 빛을 디자인하다: Light Filters**

RenderMan의 가장 강력한 기능 중 하나는 **Light Filter**입니다. 이는 조명과 물체 사이에 가상의 장치를 놓아 빛의 형태, 색상, 강도를 더욱 정교하게 제어하는 기능입니다.

1. 라이트를 선택하고 Attribute Editor의 **Light Filters** 탭에서 `Add...` 버튼을 클릭하여 원하는 필터를 추가합니다.
2. Hypershade에서 생성된 필터 노드를 선택하여 세부 속성을 조절합니다.

**추천 실습 필터:**

- **PxrBarnLightFilter:** 스튜디오 촬영에서 사용하는 '반 도어(Barn Door)'를 시뮬레이션합니다. 사각형 조명의 빛이 퍼지는 영역을 네 개의 문(Edge)으로 막아 빛의 형태를 제어할 수 있습니다. 특정 영역에만 빛을 비추거나 차단하고 싶을 때 매우 유용합니다.
- **PxrGoboLightFilter:** '고보(Gobo)'는 빛 앞에 놓는 특정 무늬가 새겨진 판입니다. 이 필터를 사용하면 텍스처(파일)를 이용해 빛에 무늬를 입힐 수 있습니다. 창문 틈으로 들어오는 빛, 나뭇잎 사이로 비치는 그림자 등 극적인 효과를 연출하는 데 탁월합니다.

### **오늘의 실습 과제**

1. **고급 HDRI 라이팅:**
    - 캐릭터 또는 복잡한 형태의 모델을 준비합니다.
    - 오늘 배운 **하늘/태양 분리 기법**을 사용하여 IBL을 설정해 보세요. 태양 역할을 하는 DomeLight를 회전시켜 그림자 방향을 바꿔보고, Intensity를 조절하여 그림자의 선명도를 제어하는 연습을 합니다.
2. **3점 조명 설계 및 Light Filter 적용:**
    - 위에서 IBL로 기본 환경을 설정한 씬에, **PxrRectLight**를 사용하여 **Key, Fill, Rim** 3점 조명을 추가로 설계하여 모델을 더욱 돋보이게 만들어 보세요. (이때 IBL의 강도는 3점 조명을 보조하는 수준으로 살짝 낮추는 것이 좋습니다.)
    - Key Light에 **PxrBarnLightFilter**를 적용하여 빛이 모델의 특정 부분에만 집중되도록 제어해 보세요.
    - Rim Light에 **PxrGoboLightFilter**를 적용하고, 간단한 흑백 패턴 텍스처를 연결하여 빛에 재미있는 패턴을 만들어 보세요.